<!DOCTYPE html>
<html>
<head>
    <title>Chatbot</title>
    <style>
        body {
            background-color: #262744;
            font-family: 'Open Sans', sans-serif;
            font-size: 1.2em;
            color: #333333;
            text-align: center;
            padding: 20px;
            margin: 0;
            box-sizing: border-box;
        }
        #heading_1 {
            font-family: 'Open Sans', sans-serif;
            font-size: 1.5em;
            font-weight: bold;
            color: #0099ff;
            text-align: center;
            padding: 10px;
            margin: 0;
            animation: pulse 1s infinite;
            animation-iteration-count: 1;
}
        #chatbox {
            width: 500px;
            height: 550px;
            background-color: #f2f2f2;
            border-radius: 10px;
            padding: 10px;
            margin: 10px auto;
        }
    
        #conversation {
            width: 100%;
            height: 400px;
            overflow-y: scroll;
            padding: 10px;
            background-color: #f2f2f2;
            border-radius: 10px;
        }
    
        #user_input {
            width: 90%;
            height: 40px;
            border-radius: 10px;
            padding: 10px;
            margin-top: 10px;
            font-size: 1.2em;
        }
    
        #chat_submit {
            width: 100%;
            height: 40px;
            border-radius: 10px;
            padding: 5px;
            margin-top: 10px;
            font-size: 1.2em;
            background-color: #0099ff;
            color: #ffffff;
            font-weight: bold;
            animation: pulse 1s infinite;
            animation-iteration-count: 2;
        }
    
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }
    </style>
</head>
<body>
<div id="heading_1"> Welcome to GingerDaddyz Chatbot </div>    
<div id="chatbox">
        <form action="{{ url_for('update_conversation') }}" method="POST">
			<div id="conversation">

			</div>
            <input type="text" name="user_input" id="user_input">
            <input type="submit" name="submit" id="chat_submit" value="GO">
        </form>
    </div>
    <script>
        // Add an event listener to the form submission
        document.getElementById('chat_submit').addEventListener('click', function(e) {
            // Prevent the page from reloading
            e.preventDefault();
    
            // Get the conversation logs
            let xhr = new XMLHttpRequest();
            xhr.open('POST', '{{ url_for("update_conversation") }}');
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.onload = function() {
                if (xhr.status === 200) {
                    // Update the conversation logs
                    let chatbox = document.getElementById('conversation');
                    chatbox.innerHTML += '<p>User: ' + document.getElementById('user_input').value + '</p>';
                    chatbox.innerHTML += '<p>Jax: ' + xhr.responseText + '</p>';
                    // Clear the text input
                    document.getElementById('user_input').value = '';
                }
            };
            xhr.send('user_input=' + document.getElementById('user_input').value);
        });
    </script>
    </body>
    </html>
